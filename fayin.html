<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ§ çº¯å¬éŸ³é€‰æ±‰å­—</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', sans-serif;
            background-color: #f0f9f0;
            margin: 0;
            padding: 20px;
            text-align: center;
        }
        h1 {
            color: #2d5a2d;
            font-size: 36px;
            margin-bottom: 10px;
        }
        .speak-btn {
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 50%;
            width: 80px;
            height: 80px;
            font-size: 30px;
            cursor: pointer;
            margin: 20px auto;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            transition: all 0.3s;
        }
        .speak-btn:hover {
            background: #45a049;
            transform: scale(1.05);
        }
        .options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            max-width: 500px;
            margin: 20px auto;
        }
        .option {
            background: white;
            border: 3px solid #ddd;
            border-radius: 15px;
            font-size: 40px;
            padding: 25px 10px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .option:hover {
            border-color: #4CAF50;
            background: #f0fff0;
        }
        .option.correct {
            background: #4CAF50;
            color: white;
            border-color: #4CAF50;
        }
        .option.wrong {
            background: #f44336;
            color: white;
            border-color: #f44336;
        }
        .progress {
            font-size: 20px;
            margin: 15px 0;
            color: #2d5a2d;
        }
        .success-message {
            font-size: 28px;
            color: #2d5a2d;
            margin: 30px 0;
            display: none;
        }
        .restart-btn {
            background: #2196F3;
            color: white;
            border: none;
            border-radius: 25px;
            padding: 12px 24px;
            font-size: 18px;
            cursor: pointer;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h1>ğŸ§ çº¯å¬éŸ³é€‰æ±‰å­—</h1>
    <div class="progress" id="progress">ç¬¬1é¢˜ / å…±8é¢˜</div>
    <button class="speak-btn" id="speakBtn">ğŸ”Š</button>
    <div class="options" id="options"></div>
    <div class="success-message" id="successMessage">
        ğŸ‰ æŒ‘æˆ˜æˆåŠŸï¼ ğŸ‰<br>
        <button class="restart-btn" onclick="restartGame()">å†ç©ä¸€æ¬¡</button>
    </div>

    <audio id="correctSound" src="https://assets.mixkit.co/sfx/preview/mixkit-correct-answer-tone-2870.mp3"></audio>
    <audio id="wrongSound" src="https://assets.mixkit.co/sfx/preview/mixkit-wrong-answer-fail-notification-946.mp3"></audio>

    <script>
        // ç”Ÿå­—æ•°æ®
        const gameData = [
            {char: 'ä¸Šä¸‹', pinyin: 'shÃ ng xiÃ '},
            {char: 'å·¦å³', pinyin: 'zuÇ’ yÃ²u'},
            {char: 'å‰å', pinyin: 'qiÃ¡n hÃ²u'},
            {char: 'å¤šå°‘', pinyin: 'duÅ shÇo'},
            {char: 'å“ªäº›', pinyin: 'nÇ xiÄ“'},
            {char: 'æŒ‰ç…§', pinyin: 'Ã n zhÃ o'},
            {char: 'æ–¹æ³•', pinyin: 'fÄng fÇ'},
            {char: 'ç›¸åŒ', pinyin: 'xiÄng tÃ³ng'},
            {char: 'ä¸åŒ', pinyin: 'bÃ¹ tÃ³ng'},
            {char: 'é«˜çŸ®', pinyin: 'gÄo Çi'},
            {char: 'é•¿çŸ­', pinyin: 'chÃ¡ng duÇn'},
            {char: 'è¡¨ç¤º', pinyin: 'biÇo shÃ¬'},
            {char: 'åœˆä¸€åœˆ', pinyin: 'quÄn yÄ« quÄn'},
            {char: 'ç”»ä¸€ç”»', pinyin: 'huÃ  yÄ« huÃ '},
            {char: 'æ•°ä¸€æ•°', pinyin: 'shÇ” yÄ« shÇ”'},
            {char: 'è¿ä¸€è¿', pinyin: 'liÃ¡n yÄ« liÃ¡n'},
            {char: 'æ¶‚ä¸€æ¶‚', pinyin: 'tÃº yÄ« tÃº'},
            {char: 'æ¯”ä¸€æ¯”', pinyin: 'bÇ yÄ« bÇ'},
            {char: 'çƒ', pinyin: 'qiÃº'},
            {char: 'æ­£æ–¹ä½“', pinyin: 'zhÃ¨ng fÄng tÇ'},
            {char: 'é•¿æ–¹ä½“', pinyin: 'chÃ¡ng fÄng tÇ'},
            {char: 'æ­£æ–¹å½¢', pinyin: 'zhÃ¨ng fÄng xÃ­ng'},
            {char: 'é•¿æ–¹å½¢', pinyin: 'chÃ¡ng fÄng xÃ­ng'},
            {char: 'åœ†æŸ±', pinyin: 'yuÃ¡n zhÃ¹'},
            {char: 'åŸæ¥', pinyin: 'yuÃ¡n lÃ¡i'},
            {char: 'ç°åœ¨', pinyin: 'xiÃ n zÃ i'},
            {char: 'ä¸€å…±', pinyin: 'yÄ« gÃ²ng'},
            {char: 'è¿˜æœ‰', pinyin: 'hÃ¡i yÇ’u'},
            {char: 'å‰©ä¸‹', pinyin: 'shÃ¨ng xiÃ '},
            {char: 'åˆèµ·æ¥', pinyin: 'hÃ© qÇ lÃ¡i'},
            {char: 'çœ‹å›¾', pinyin: 'kÃ n tÃº'},
            {char: 'æˆ–è€…', pinyin: 'huÃ² zhÄ›'},
            {char: 'åªæœ‰', pinyin: 'zhÇ yÇ’u'},
            {char: 'é€‰æ‹©', pinyin: 'xuÇn zÃ©'},
            {char: 'åˆ¤æ–­', pinyin: 'pÃ n duÃ n'},
            {char: 'å»æ‰', pinyin: 'qÃ¹ diÃ o'},
            {char: 'è¯»ä¸€è¯»', pinyin: 'dÃº yÄ« dÃº'},
            {char: 'å†™ä¸€å†™', pinyin: 'xiÄ› yÄ« xiÄ›'},
            {char: 'å¡«ä¸€å¡«', pinyin: 'tiÃ¡n yÄ« tiÃ¡n'},
            {char: 'ç®—ä¸€ç®—', pinyin: 'suÃ n yÄ« suÃ n'},
            {char: 'æ¯”è¾ƒ', pinyin: 'bÇ jiÃ o'},
            {char: 'ç›¸æ¯”', pinyin: 'xiÄng bÇ'},
            {char: 'ç›´å°º', pinyin: 'zhÃ­ chÇ'},
            {char: 'ç»ƒä¹ ', pinyin: 'liÃ n xÃ­'},
            {char: 'ç¬¬å‡ ', pinyin: 'dÃ¬ jÇ'},
            {char: 'æ¥ç€', pinyin: 'jiÄ“ zhe'},
            {char: 'é è¿‘', pinyin: 'kÃ o jÃ¬n'},
            {char: 'é¡ºåº', pinyin: 'shÃ¹n xÃ¹'},
            {char: 'æ•°é‡', pinyin: 'shÃ¹ liÃ ng'},
            {char: 'è¯»ä½œ', pinyin: 'dÃº zuÃ²'},
            {char: 'å›¾å½¢', pinyin: 'tÃº xÃ­ng'},
            {char: 'ç»“æœ', pinyin: 'jiÃ© guÇ’'},
            {char: 'åˆ†ç±»', pinyin: 'fÄ“n lÃ¨i'},
            {char: 'ç¡®å®š', pinyin: 'quÃ¨ dÃ¬ng'},
            {char: 'æ€æ ·', pinyin: 'zÄ›n yÃ ng'},
            {char: 'æ ‡å‡†', pinyin: 'biÄo zhÇ”n'},
            {char: 'é»„è‰²', pinyin: 'huÃ¡ng sÃ¨'},
            {char: 'çº¢è‰²', pinyin: 'hÃ³ng sÃ¨'},
            {char: 'è§£ç­”', pinyin: 'jiÄ› dÃ¡'},
            {char: 'å¯èƒ½', pinyin: 'kÄ› nÃ©ng'},
            {char: 'å¯¹åº”', pinyin: 'duÃ¬ yÃ¬ng'},
            {char: 'æ’åˆ—', pinyin: 'pÃ¡i liÃ¨'},
            {char: 'ç®—å¼', pinyin: 'suÃ n shÃ¬'},
            {char: 'ä»å°åˆ°å¤§', pinyin: 'cÃ³ng xiÇo dÃ o dÃ '},
            {char: 'ä»å¤§åˆ°å°', pinyin: 'cÃ³ng dÃ  dÃ o xiÇo'},
            {char: 'è§„å¾‹', pinyin: 'guÄ« lÇœ'}
        ];

        let currentQuestions = [];
        let currentQuestionIndex = 0;
        let correctAnswer = '';
        let synth = window.speechSynthesis;

        function speak(text) {
            if (synth.speaking) synth.cancel();
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'zh-CN';
            utterance.rate = 0.9;
            synth.speak(utterance);
        }

        function startGame() {
            currentQuestions = shuffleArray([...gameData]).slice(0, 8);
            currentQuestionIndex = 0;
            showQuestion();
        }

        function showQuestion() {
            if (currentQuestionIndex >= currentQuestions.length) {
                document.getElementById('successMessage').style.display = 'block';
                return;
            }

            const q = currentQuestions[currentQuestionIndex];
            correctAnswer = q.char;
            
            document.getElementById('progress').textContent = 
                `ç¬¬${currentQuestionIndex + 1}é¢˜ / å…±${currentQuestions.length}é¢˜`;
            
            // ç”Ÿæˆé€‰é¡¹ï¼š1ä¸ªæ­£ç¡®ç­”æ¡ˆ + 3ä¸ªå¹²æ‰°é¡¹
            const options = [q.char];
            const otherChars = gameData.filter(item => item.char !== q.char).map(item => item.char);
            const shuffledOthers = shuffleArray(otherChars);
            options.push(...shuffledOthers.slice(0, 3));
            const shuffledOptions = shuffleArray(options);

            const optionsContainer = document.getElementById('options');
            optionsContainer.innerHTML = '';
            shuffledOptions.forEach(char => {
                const btn = document.createElement('div');
                btn.className = 'option';
                btn.textContent = char;
                btn.onclick = () => checkAnswer(char, btn);
                optionsContainer.appendChild(btn);
            });

            // è‡ªåŠ¨æœ—è¯»é¢˜ç›®
            speak(q.pinyin);
        }

        function checkAnswer(selectedChar, btnElement) {
            const options = document.querySelectorAll('.option');
            options.forEach(opt => opt.onclick = null); // ç¦ç”¨æ‰€æœ‰é€‰é¡¹
            
            if (selectedChar === correctAnswer) {
                btnElement.classList.add('correct');
                document.getElementById('correctSound').play();
                setTimeout(() => {
                    currentQuestionIndex++;
                    showQuestion();
                }, 1000);
            } else {
                btnElement.classList.add('wrong');
                document.getElementById('wrongSound').play();
                // é«˜äº®æ˜¾ç¤ºæ­£ç¡®ç­”æ¡ˆ
                options.forEach(opt => {
                    if (opt.textContent === correctAnswer) {
                        opt.classList.add('correct');
                    }
                });
                setTimeout(() => {
                    currentQuestionIndex++;
                    showQuestion();
                }, 2000);
            }
        }

        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        function restartGame() {
            document.getElementById('successMessage').style.display = 'none';
            startGame();
        }

        // åˆå§‹åŒ–
        document.getElementById('speakBtn').onclick = function() {
            if (currentQuestions[currentQuestionIndex]) {
                speak(currentQuestions[currentQuestionIndex].pinyin);
            }
        };

        startGame();
    </script>
</body>
</html>
