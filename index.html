<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç”Ÿå­—æ¶ˆæ¶ˆä¹</title>
    <style>
        body {
            background-color: #e8f5e8;
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            margin: 0;
            padding: 20px;
            text-align: center;
        }

        .title {
            font-size: 48px;
            font-weight: bold;
            color: #2d5a2d;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .game-info {
            margin-bottom: 20px;
            font-size: 20px;
            color: #2d5a2d;
            font-weight: bold;
        }

        .game-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }

        .bubble {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 24px;
            font-weight: bold;
            color: white;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
            margin: 10px;
            transition: all 0.3s ease;
            box-shadow: 
                0 8px 16px rgba(0,0,0,0.2),
                inset 0 4px 8px rgba(255,255,255,0.3),
                inset 0 -4px 8px rgba(0,0,0,0.1);
            text-align: center;
            line-height: 1.2;
            position: relative;
            user-select: none;
        }

        .bubble:hover {
            transform: translateY(-5px);
            box-shadow: 
                0 12px 24px rgba(0,0,0,0.3),
                inset 0 4px 8px rgba(255,255,255,0.4),
                inset 0 -4px 8px rgba(0,0,0,0.1);
        }

        .bubble.selected {
            transform: scale(1.1);
            box-shadow: 
                0 0 20px rgba(255,215,0,0.8),
                0 8px 16px rgba(0,0,0,0.2),
                inset 0 4px 8px rgba(255,255,255,0.3),
                inset 0 -4px 8px rgba(0,0,0,0.1);
            border: 3px solid #ffd700;
        }

        .bubble.matched {
            animation: disappear 0.5s ease-out forwards;
        }

        @keyframes disappear {
            0% {
                transform: scale(1);
                opacity: 1;
            }
            50% {
                transform: scale(1.2);
                opacity: 0.5;
            }
            100% {
                transform: scale(0);
                opacity: 0;
            }
        }

        .success-message {
            display: none;
            font-size: 36px;
            font-weight: bold;
            color: #2d5a2d;
            margin: 30px 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .time-display {
            font-size: 24px;
            color: #2d5a2d;
            font-weight: bold;
            margin: 10px 0;
        }

        .continue-btn {
            font-size: 20px;
            padding: 15px 30px;
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
            margin-top: 20px;
        }

        .continue-btn:hover {
            background: linear-gradient(45deg, #45a049, #4CAF50);
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.3);
        }

        .restart-btn {
            font-size: 18px;
            padding: 10px 20px;
            background: linear-gradient(45deg, #2196F3, #1976D2);
            color: white;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
            margin-left: 10px;
        }

        .restart-btn:hover {
            background: linear-gradient(45deg, #1976D2, #2196F3);
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.3);
        }
    </style>
</head>
<body>
    <h1 class="title">ç”Ÿå­—æ¶ˆæ¶ˆä¹</h1>
    <div class="game-info">
        <div>å°†ç”Ÿå­—å’Œå¯¹åº”çš„æ‹¼éŸ³é…å¯¹æ¶ˆé™¤</div>
        <div class="time-display">æ¸¸æˆæ—¶é—´: <span id="timer">00:00</span></div>
        <button class="restart-btn" onclick="restartGame()">é‡æ–°å¼€å§‹</button>
    </div>
    
    <div class="game-container" id="gameContainer">
    </div>
    
    <div class="success-message" id="successMessage">
        ğŸ‰ æ­å–œæŒ‘æˆ˜æˆåŠŸï¼ğŸ‰<br>
        <div style="font-size: 24px; margin: 10px 0;">å®Œæˆæ—¶é—´: <span id="finalTime"></span></div>
        <button class="continue-btn" onclick="continueChallenge()">ç»§ç»­æŒ‘æˆ˜</button>
    </div>

    <script>
        // ç”Ÿå­—å’Œæ‹¼éŸ³æ•°æ® - æ‚¨å¯ä»¥æ ¹æ®é™„ä»¶å†…å®¹ä¿®æ”¹è¿™é‡Œ
        const charData = [
            {char: 'æ˜¥', pinyin: 'chÅ«n'},
            {char: 'å¤', pinyin: 'xiÃ '},
            {char: 'ç§‹', pinyin: 'qiÅ«'},
            {char: 'å†¬', pinyin: 'dÅng'},
            {char: 'èŠ±', pinyin: 'huÄ'},
            {char: 'è‰', pinyin: 'cÇo'},
            {char: 'æ ‘', pinyin: 'shÃ¹'},
            {char: 'é¸Ÿ', pinyin: 'niÇo'},
            {char: 'å±±', pinyin: 'shÄn'},
            {char: 'æ°´', pinyin: 'shuÇ'},
            {char: 'æ—¥', pinyin: 'rÃ¬'},
            {char: 'æœˆ', pinyin: 'yuÃ¨'},
            {char: 'é£', pinyin: 'fÄ“ng'},
            {char: 'é›¨', pinyin: 'yÇ”'},
            {char: 'äº‘', pinyin: 'yÃºn'},
            {char: 'å¤©', pinyin: 'tiÄn'},
            {char: 'åœ°', pinyin: 'dÃ¬'},
            {char: 'äºº', pinyin: 'rÃ©n'}
        ];

        let gameData = [];
        let selectedBubbles = [];
        let matchedPairs = 0;
        let startTime;
        let timerInterval;
        let currentGameData = [];

        function generateRandomColors() {
            const colors = [
                'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
                'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)',
                'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)',
                'linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)',
                'linear-gradient(135deg, #fa709a 0%, #fee140 100%)',
                'linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)',
                'linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%)',
                'linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%)',
                'linear-gradient(135deg, #ff8a80 0%, #ea80fc 100%)',
                'linear-gradient(135deg, #8fd3f4 0%, #84fab0 100%)',
                'linear-gradient(135deg, #d299c2 0%, #fef9d7 100%)',
                'linear-gradient(135deg, #89f7fe 0%, #66a6ff 100%)',
                'linear-gradient(135deg, #fdbb2d 0%, #22c1c3 100%)',
                'linear-gradient(135deg, #e0c3fc 0%, #9bb5ff 100%)',
                'linear-gradient(135deg, #fbc2eb 0%, #a6c1ee 100%)',
                'linear-gradient(135deg, #fdbb2d 0%, #22c1c3 100%)',
                'linear-gradient(135deg, #ff9a8b 0%, #a8e6cf 100%)',
                'linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%)'
            ];
            return colors[Math.floor(Math.random() * colors.length)];
        }

        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        function initGame() {
            // éšæœºé€‰æ‹©8å¯¹ç”Ÿå­—å’Œæ‹¼éŸ³
            const shuffledData = shuffleArray(charData);
            const selectedChars = shuffledData.slice(0, 8);
            
            gameData = [];
            selectedChars.forEach(item => {
                gameData.push({type: 'char', value: item.char, pair: item.pinyin});
                gameData.push({type: 'pinyin', value: item.pinyin, pair: item.char});
            });
            
            gameData = shuffleArray(gameData);
            matchedPairs = 0;
            selectedBubbles = [];
            startTime = Date.now();
            
            createBubbles();
            startTimer();
            document.getElementById('successMessage').style.display = 'none';
        }

        function createBubbles() {
            const container = document.getElementById('gameContainer');
            container.innerHTML = '';
            
            gameData.forEach((item, index) => {
                const bubble = document.createElement('div');
                bubble.className = 'bubble';
                bubble.style.background = generateRandomColors();
                bubble.textContent = item.value;
                bubble.dataset.index = index;
                bubble.dataset.type = item.type;
                bubble.dataset.pair = item.pair;
                bubble.onclick = () => selectBubble(index);
                container.appendChild(bubble);
            });
        }

        function selectBubble(index) {
            const bubble = document.querySelector(`[data-index="${index}"]`);
            if (!bubble || bubble.classList.contains('matched') || selectedBubbles.includes(index)) {
                return;
            }

            // å¦‚æœå·²ç»é€‰ä¸­äº†ä¸¤ä¸ªæ³¡æ³¡ï¼Œå…ˆæ¸…é™¤é€‰ä¸­çŠ¶æ€
            if (selectedBubbles.length >= 2) {
                clearSelection();
            }

            bubble.classList.add('selected');
            selectedBubbles.push(index);

            if (selectedBubbles.length === 2) {
                setTimeout(checkMatch, 500);
            }
        }

        function checkMatch() {
            const [index1, index2] = selectedBubbles;
            const bubble1 = document.querySelector(`[data-index="${index1}"]`);
            const bubble2 = document.querySelector(`[data-index="${index2}"]`);
            const data1 = gameData[index1];
            const data2 = gameData[index2];

            if ((data1.type === 'char' && data2.type === 'pinyin' && data1.value === data2.pair && data1.pair === data2.value) ||
                (data1.type === 'pinyin' && data2.type === 'char' && data1.value === data2.pair && data1.pair === data2.value)) {
                // åŒ¹é…æˆåŠŸ
                bubble1.classList.add('matched');
                bubble2.classList.add('matched');
                matchedPairs++;
                
                setTimeout(() => {
                    bubble1.style.display = 'none';
                    bubble2.style.display = 'none';
                    
                    if (matchedPairs === gameData.length / 2) {
                        endGame();
                    }
                }, 500);
            } else {
                // åŒ¹é…å¤±è´¥
                clearSelection();
            }
        }

        function clearSelection() {
            selectedBubbles.forEach(index => {
                const bubble = document.querySelector(`[data-index="${index}"]`);
                if (bubble) {
                    bubble.classList.remove('selected');
                }
            });
            selectedBubbles = [];
        }

        function startTimer() {
            timerInterval = setInterval(updateTimer, 1000);
        }

        function updateTimer() {
            const elapsed = Math.floor((Date.now() - startTime) / 1000);
            const minutes = Math.floor(elapsed / 60);
            const seconds = elapsed % 60;
            document.getElementById('timer').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        function endGame() {
            clearInterval(timerInterval);
            const elapsed = Math.floor((Date.now() - startTime) / 1000);
            const minutes = Math.floor(elapsed / 60);
            const seconds = elapsed % 60;
            const timeString = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            document.getElementById('finalTime').textContent = timeString;
            document.getElementById('successMessage').style.display = 'block';
        }

        function continueChallenge() {
            initGame();
        }

        function restartGame() {
            clearInterval(timerInterval);
            initGame();
        }

        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–æ¸¸æˆ
        window.onload = function() {
            initGame();
        };
    </script>
</body>
</html>
